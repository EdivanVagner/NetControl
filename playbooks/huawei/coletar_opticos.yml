---
- name: üîç Coletar Informa√ß√µes do Transceiver (√ìptica) em Switches Huawei
  hosts: huawei_switch
  gather_facts: no
  connection: network_cli
  
  # Vari√°veis de Conex√£o (Ajuste conforme seu ambiente)
  vars:
    ansible_network_os: community.network.cnos # Usado para o tipo de conex√£o VRP
    ansible_user: "AlphaSoares"
    ansible_password: "Soares99RS@"
    # Se precisar de modo privilegiado (enable) para executar o comando:
    # ansible_become: yes
    # ansible_become_method: enable
    # ansible_become_pass: "sua_senha_enable"
    
  tasks:
    # ------------------ PRIMEIRA TASK --------------------
    # O tra√ßo (-) define uma nova task na lista
    - name: üìä Executar 'display interface transceiver verbose'
      ansible.netcommon.cli_command:
        # 'command' √© um argumento do m√≥dulo, indentado corretamente
        command: display interface transceiver verbose
      # 'register' √© uma chave da task, alinhada com o m√≥dulo e o 'name'
      register: optical_output 
      
    # ------------------ SEGUNDA TASK --------------------
    # Um novo tra√ßo (-) para a pr√≥xima task
    - name: üìã Exibir a sa√≠da da √≥ptica no console (Opcional)
      ansible.builtin.debug:
        msg: "Sa√≠da da √≥ptica para {{ inventory_hostname }}:\n{{ optical_output.stdout[0] }}"
